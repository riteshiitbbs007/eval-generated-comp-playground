<template>
    <div class="slds-card">
        <div class="slds-card__body slds-card__body_inner">
            <!-- Optional Header -->
            <template if:true={showHeader}>
                <div class="slds-text-heading_medium slds-p-bottom_medium">
                    {headerText}
                </div>
            </template>

            <!-- Contact Form -->
            <div class="slds-form">
                <!-- Name Field -->
                <div class="slds-form-element slds-m-bottom_medium" class:slds-has-error={nameHasError}>
                    <label class="slds-form-element__label" for="name-input">
                        <abbr class="slds-required" title="required">*</abbr> Name
                    </label>
                    <div class="slds-form-element__control">
                        <input type="text"
                            id="name-input"
                            name="name"
                            class="slds-input"
                            value={name}
                            required
                            aria-describedby={nameAriaDescribedBy}
                            onchange={handleChange}
                            onblur={validateName}
                        />
                    </div>
                    <template if:true={nameHasError}>
                        <div class="slds-form-element__help slds-has-error" id="name-error" role="alert">
                            <lightning-icon icon-name="utility:error"
                                alternative-text="Error"
                                size="x-small"
                                class="slds-icon slds-icon-text-error slds-m-right_x-small">
                            </lightning-icon>
                            {nameError}
                        </div>
                    </template>
                </div>

                <!-- Email Field -->
                <div class="slds-form-element slds-m-bottom_medium" class:slds-has-error={emailHasError}>
                    <label class="slds-form-element__label" for="email-input">
                        <abbr class="slds-required" title="required">*</abbr> Email
                    </label>
                    <div class="slds-form-element__control">
                        <input type="email"
                            id="email-input"
                            name="email"
                            class="slds-input"
                            value={email}
                            required
                            aria-describedby={emailAriaDescribedBy}
                            onchange={handleChange}
                            onblur={validateEmail}
                        />
                    </div>
                    <template if:true={emailHasError}>
                        <div class="slds-form-element__help slds-has-error" id="email-error" role="alert">
                            <lightning-icon icon-name="utility:error"
                                alternative-text="Error"
                                size="x-small"
                                class="slds-icon slds-icon-text-error slds-m-right_x-small">
                            </lightning-icon>
                            {emailError}
                        </div>
                    </template>
                </div>

                <!-- Message Field -->
                <div class="slds-form-element slds-m-bottom_medium" class:slds-has-error={messageHasError}>
                    <label class="slds-form-element__label" for="message-input">
                        <abbr class="slds-required" title="required">*</abbr> Message
                    </label>
                    <div class="slds-form-element__control">
                        <textarea
                            id="message-input"
                            name="message"
                            class="slds-textarea"
                            value={message}
                            required
                            aria-describedby={messageAriaDescribedBy}
                            onchange={handleChange}
                            onblur={validateMessage}
                            rows="4"
                        ></textarea>
                    </div>
                    <template if:true={messageHasError}>
                        <div class="slds-form-element__help slds-has-error" id="message-error" role="alert">
                            <lightning-icon icon-name="utility:error"
                                alternative-text="Error"
                                size="x-small"
                                class="slds-icon slds-icon-text-error slds-m-right_x-small">
                            </lightning-icon>
                            {messageError}
                        </div>
                    </template>
                </div>

                <!-- Submit Button -->
                <div class="slds-form-element slds-m-top_medium">
                    <button
                        class="slds-button slds-button_brand"
                        onclick={handleSubmit}
                        disabled={isSubmitDisabled}
                    >
                        {submitButtonLabel}
                    </button>
                </div>

                <!-- Success Message -->
                <template if:true={submitSuccess}>
                    <div class="slds-m-top_medium slds-notify slds-notify_alert slds-alert_success" role="alert">
                        <span class="slds-assistive-text">Success</span>
                        <lightning-icon icon-name="utility:success"
                            alternative-text="Success"
                            size="small"
                            class="slds-m-right_x-small">
                        </lightning-icon>
                        <h2>Form submitted successfully!</h2>
                    </div>
                </template>
            </div>
        </div>
    </div>
</template>